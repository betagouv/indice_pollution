(function(e){function n(n){for(var o,r,s=n[0],a=n[1],u=n[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(n);while(f.length)f.shift()();return c.push.apply(c,u||[]),t()}function t(){for(var e,n=0;n<c.length;n++){for(var t=c[n],o=!0,s=1;s<t.length;s++){var a=t[s];0!==i[a]&&(o=!1)}o&&(c.splice(n--,1),e=r(r.s=t[0]))}return e}var o={},i={app:0},c=[];function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=n,s=s.slice();for(var u=0;u<s.length;u++)n(s[u]);var l=a;c.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("a026"),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("autocomplete",{attrs:{search:e.search,"get-result-value":e.getResultValue,placeholder:"Recherchez une ville","aria-label":"Recherchez une ville"},on:{submit:e.onSubmit}})},c=[],r=(t("d3b7"),t("95bf")),s=(t("8b78"),"/autocomplete"),a={name:"Search",components:{Autocomplete:r["a"]},methods:{search:function(e){var n="".concat(s,"?q=").concat(encodeURI(e));return new Promise((function(t){if(e.length<3)return t([]);fetch(n).then((function(e){return e.json()})).then((function(e){t(e)}))}))},getResultValue:function(e){return e.nom},onSubmit:function(e){window.location="/ville/".concat(encodeURI(e.code))}}},u=a,l=t("2877"),d=Object(l["a"])(u,i,c,!1,null,null,null),f=d.exports,p=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"section"},[t("h1",[e._v("Indice de pollution à "+e._s(e.nomVille))]),t("div",{staticClass:"tiles"},[t("div",{staticClass:"grid"},e._l(e.indices,(function(e,n){return t("Indice",{key:e.date,attrs:{indice:e.indice,date:e.date,index:n}})})),1)])])},h=[],m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"tile",class:e.classObject},[t("h3",[e._v(e._s(e.date))]),t("h2",[e._v(e._s(e.indice))]),t("span",[e._v(" "+e._s(e.indice_label[e.indice]))])])},v=[],b={name:"Indice",props:["date","indice"],data:function(){return{indice_class:{1:"tresbon",2:"tresbon",3:"bon",4:"bon",5:"moyen",6:"mediocre",7:"mediocre",8:"mauvais",9:"mauvais",10:"tresmauvais"},indice_label:{1:"Très bon",2:"Très bon",3:"Bon",4:"Bon",5:"Moyen",6:"Mediocre",7:"Mediocre",8:"Mauvais",9:"Mauvais",10:"Très mauvais"}}},computed:{classObject:function(){return this.indice_class[this.indice]}}},_=b,g=(t("9152"),Object(l["a"])(_,m,v,!1,null,null,null)),j=g.exports,y={name:"Indices",components:{Indice:j},data:function(){return{indices:[],nomVille:""}},props:["insee"],created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;fetch("/forecast?insee=".concat(this.insee)).then((function(e){return e.json()})).then((function(n){e.indices=n.data})),fetch("https://geo.api.gouv.fr/communes/".concat(this.insee,"?fields=nom&format=json&geometry=centre")).then((function(e){return e.json()})).then((function(n){e.nomVille=n["nom"]}))}}},O=y,w=Object(l["a"])(O,p,h,!1,null,null,null),x=w.exports,M=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"section"},[t("h1",[e._v("Épisodes de pollution prévus à "+e._s(e.nomVille))])])},P=[],S={name:"Episodes",data:function(){return{episodes:[],nomVille:""}},props:["insee"],created:function(){console.log("episodes created"),this.fetchData()},methods:{fetchData:function(){var e=this;fetch("https://geo.api.gouv.fr/communes/".concat(this.insee,"?fields=nom&format=json&geometry=centre")).then((function(e){return e.json()})).then((function(n){e.nomVille=n["nom"]})),fetch("/episodes?insee=".concat(this.insee)).then((function(e){return e.json()})).then((function(n){e.episodes=n.data,console.log(e.episodes)}))}}},V=S,I=Object(l["a"])(V,M,P,!1,null,null,null),R=I.exports;o["a"].config.productionTip=!1,new o["a"]({el:"#app",components:{search:f,indices:x,episodes:R}})},5704:function(e,n,t){},9152:function(e,n,t){"use strict";var o=t("5704"),i=t.n(o);i.a}});
//# sourceMappingURL=app.c890a838.js.map